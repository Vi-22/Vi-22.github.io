<head>
  <meta name="description" content="Демо звонок" />
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title></title>
  <link
    rel="icon"
    href="https://248305.selcdn.ru/demo_bot_static/just-ai-logo.png"
  />
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <script src="detectWebRTC.min.js"></script>
  <script src="jssip.min.js"></script>
  <script src="widget.min.js"></script>
  <link rel="stylesheet" href="style.min.css" />
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <div id="widget">
    <div id="myZadarmaCallmeWidget"></div>
  </div>
  <div id="info" style="visibility: hidden;">
    <img id="avatar" src="https://248305.selcdn.ru/demo_bot_static/solvi-webapp-avatar.png"/>
    <div id="keyword">
      <p><b>Кодовое слово:</b></p>
      <p id="user-keyword"></p>
    </div>
  </div>

  <script>
    function getParam(param) {
        const urlParams = new URLSearchParams(window.location.search);
        return urlParams.get(param)
    }

    var myZadarmaCallmeWidget;
    var widgetInfo = {
      test: {
        widgetId: "HFFbZ43mXZetRf9c8nm6a8763Vyjnf2ntZpm9xnu75Pr7Af1vpTcP7UH5baxLP5sJv5Avu1jds8rcsZgDnscZrk7xzmR9N6ca1cdfdd79232dd28db8606e0ae1999dd",
        sipId: "898083",
      },
      prod: {
        widgetId: "Njv4snhzrvsXpc8sa2faM37gZacjzu9bU8GH8G29z9rx1m7Jxb7zExr8EsymfkRH1u9ehvxzCU7REPmz54jvMb84kH7T2LHVf45779440662a785e8e7c0d8b67f4680",
        sipId: "270997"
      },
      yandex: {
        widgetId: "gkzzc5K8t79jRLBJsBDrN2Y54ecm6Gem67K8fFvnR2yXKpLbuHCA8Gu6zPzny72shE8cfpp2c6Yv41eymh8pdzntC7ktb1ecc7f952d535978c6e9b60c4642d4badfc",
        sipId: "914246"
      }
    }
    if (getParam("asr") === "yandex") {
      widgetInfo = widgetInfo.yandex
    } else {
      widgetInfo = getParam("test") ? widgetInfo.test : widgetInfo.prod;
    }

    var myZadarmaCallmeWidgetFn = function () {
      window.Telegram.WebApp.setBackgroundColor("#FFFFFF")

      var keyword = getParam("keyword")
      if (keyword) {
        var infoDiv = document.getElementById("info")
        infoDiv.style.visibility = "visible"
        userKeyword = document.getElementById("user-keyword")
        userKeyword.innerHTML = keyword
      }
      myZadarmaCallmeWidget = new ZadarmaCallmeWidget(
        "myZadarmaCallmeWidget"
      );
      myZadarmaCallmeWidget.create(
        {
          widgetId: widgetInfo.widgetId,
          sipId: widgetInfo.sipId,
          domElement: "myZadarmaCallmeWidget",
        },
        {
          language: "ru",
          shape: "square",
          width: "0",
          dtmf: false,
          font: "'Trebuchet MS','Helvetica CY',sans-serif",
          color_call: "rgb(255, 255, 255)",
          color_bg_call: "rgb(126, 211, 33)",
          color_border_call: "rgb(191, 233, 144)",
          color_connection: "rgb(255, 255, 255)",
          color_bg_connection: "rgb(33, 211, 166)",
          color_border_connection: "rgb(144, 233, 211)",
          color_calling: "rgb(255, 255, 255)",
          color_border_calling: "rgb(255, 218, 128)",
          color_bg_calling: "rgb(255, 181, 0)",
          color_ended: "rgb(255, 255, 255)",
          color_bg_ended: "rgb(164,164,164)",
          color_border_ended: "rgb(210, 210, 210)",
        }
      );
    };

    if (window.addEventListener) {
      window.addEventListener("load", myZadarmaCallmeWidgetFn, false);
    } else if (window.attachEvent) {
      window.attachEvent("onload", myZadarmaCallmeWidgetFn);
    }
  </script>

  <div id="zadarmaScripts"></div>
  <script>
    (function () {
      var script = document.createElement("script");
      script.src = "https://my.zadarma.com/callmewidget/v2.0.8/loader.js";
      document.getElementById("zadarmaScripts").appendChild(script);
    })();
  </script>
</body>
